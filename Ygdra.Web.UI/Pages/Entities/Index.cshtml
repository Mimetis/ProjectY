@page "{handler?}"
@model Ygdra.Web.UI.Pages.Entities.IndexModel
@{
}

<breadcrumb asp-homepage-title="Dashboard"
            asp-homepage-url="/Dashboard"
            asp-homepage-glyphicon="glyphicon glyphicon-home"></breadcrumb>

<div class="ml-3 mr-3">
    <h1 class="h4">Entities</h1>
</div>

<div class="ml-3 mr-3">
    <p>Entities represent all the entities that are processed by your engine, and will pass through ingestion and data quality process</p>
</div>

<div class="ml-3 mr-3" aria-label="Engines action">
    <a class="btn btn-dark btn-sm" asp-page="./New">
        <i class="fas fa-plus-circle"></i>
        New
    </a>
</div>

<div class="docking-form">

    <h2 class="h5">Your available entities</h2>

    <p>Choose an engine to get all the entities processed by it:</p>

    <table id="enginesTable" class="table table-striped table-hover">
        <thead class="thead-dark">
        </thead>
    </table>

    <p>Here are all the entities you've created so far</p>


    <table id="entitiesTable" class="table table-striped table-hover"
           data-search="true"
           data-show-refresh="false"
           data-show-toggle="false"
           data-show-export="true"
           data-page-list="[10, 25, 50, 100, all]"
           data-pagination="true"
           data-loading-template="loadingTemplate"
           data-resizable="true">
        <thead class="thead-dark">
            <tr>
                <th data-field="icon" data-width="80" data-align="center" data-sortable="false" 
                    data-formatter="dataSourceViewIconFormatter">Type</th>
                <th data-field="name" data-width="400" data-sortable="true" 
                    data-formatter="strongFormatter">Entity name</th>
                <th data-field="dataSourceName" data-width="300" data-align="center" data-sortable="true">Data Source Name</th>
                <th data-field="typeString" data-sortable="true">Entity type</th>
            </tr>
        </thead>
    </table>

</div>

<script>

    function strongFormatter(value, row) {
        return `<strong>${value}</strong>`;
    }

    function loadingTemplate(message) {
        return '<i class="fa fa-spinner fa-spin fa-fw fa-2x"></i>'
    }

    function dataSourceViewIconFormatter(value, row) {
        return `<div class='svg-22x22-icon'><div class='svg-icon ${value}'></div></div>`;
    }

</script>